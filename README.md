# 📊 Intermediate SQL for Data Analytics 

## Table of Contents

### 0. Intro

 - [About Course](0_Intro/1_About_Course.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/0_Intro/1_About_Course.ipynb)
 - [Colab Notebooks](0_Intro/2_Colab_Notebooks.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/0_Intro/2_Colab_Notebooks.ipynb)
 - [Database Overview](0_Intro/3_Database_Overview.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/0_Intro/3_Database_Overview.ipynb)

### 1. Pivot With Case Statements

 - [Basic Aggregation](1_Pivot_With_Case_Statements/1_Basic_Aggregation.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/1_Pivot_With_Case_Statements/1_Basic_Aggregation.ipynb)
 - [Statistical Aggregations](1_Pivot_With_Case_Statements/2_Statistical_Aggregations.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/1_Pivot_With_Case_Statements/2_Statistical_Aggregations.ipynb)
 - [Advanced Segmentation](1_Pivot_With_Case_Statements/3_Advanced_Segmentation.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/1_Pivot_With_Case_Statements/3_Advanced_Segmentation.ipynb)

### 2. Date Time

 - [Date Format](2_Date_Time/1_Date_Format.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/2_Date_Time/1_Date_Format.ipynb)
 - [Date Filtering](2_Date_Time/2_Date_Filtering.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/2_Date_Time/2_Date_Filtering.ipynb)
 - [Date Differences](2_Date_Time/3_Date_Differences.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/2_Date_Time/3_Date_Differences.ipynb)

### 3. Windows Functions

 - [Syntax](3_Windows_Functions/1_Syntax.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/3_Windows_Functions/1_Syntax.ipynb)
 - [Aggregation](3_Windows_Functions/2_Aggregation.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/3_Windows_Functions/2_Aggregation.ipynb)
 - [Ranking](3_Windows_Functions/3_Ranking.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/3_Windows_Functions/3_Ranking.ipynb)
 - [Lag Lead](3_Windows_Functions/4_Lag_Lead.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/3_Windows_Functions/4_Lag_Lead.ipynb)
 - [Frame Clause](3_Windows_Functions/5_Frame_Clause.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/3_Windows_Functions/5_Frame_Clause.ipynb)

### 4. Local DB Setup

 - [Install PostgreSQL](4_Local_DB_Setup/1_Install_PostgreSQL.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/4_Local_DB_Setup/1_Install_PostgreSQL.ipynb)
 - [Install DBeaver](4_Local_DB_Setup/2_Install_DBeaver.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/4_Local_DB_Setup/2_Install_DBeaver.ipynb)

### 5. Views

 - [View Intro](5_Views/1_View_Intro.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/5_Views/1_View_Intro.ipynb)
 - [Project Cohort Revenue](5_Views/2_Project_Cohort_Revenue.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/5_Views/2_Project_Cohort_Revenue.ipynb)
 - [Install VSCode](5_Views/3_Install_VSCode.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/5_Views/3_Install_VSCode.ipynb)

### 6. Data Cleaning

 - [Conditional Handle Nulls](6_Data_Cleaning/1_Conditional_Handle_Nulls.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/6_Data_Cleaning/1_Conditional_Handle_Nulls.ipynb)
 - [String Formatting](6_Data_Cleaning/2_String_Formatting.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/6_Data_Cleaning/2_String_Formatting.ipynb)
 - [Project Customer Segmentation](6_Data_Cleaning/3_Project_Customer_Segmentation.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/6_Data_Cleaning/3_Project_Customer_Segmentation.ipynb)

### 7. Query Optimization

 - [Explain Intro](7_Query_Optimization/1_Explain_Intro.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/7_Query_Optimization/1_Explain_Intro.ipynb)
 - [Optimization Techniques](7_Query_Optimization/2_Optimization_Techniques.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/7_Query_Optimization/2_Optimization_Techniques.ipynb)
 - [Project Customer Retention](7_Query_Optimization/3_Project_Customer_Retention.ipynb) - [(Open in Colab)](https://colab.research.google.com/github/lukebarousse/Int_SQL_Data_Analytics_Course/blob/main/7_Query_Optimization/3_Project_Customer_Retention.ipynb)

## How to Run SQL Files
### Method 1️⃣: Run in Google Colab
> Recommended to start the course.
#### Prerequisites:
- Google Account

#### Steps:
1. Click the "Open in Colab" button at top of any notebook.  
<img src="./Resources/images/open_in_colab.png" alt="Open in Colab" width="50%" height="auto">
2. Run all cells in the notebook.   
   
---

### Method 2️⃣: Run Database Locally w/ PGAdmin
> Second half of course uses this method.
#### Prerequisites:
- [PostgreSQL Installed](https://www.postgresql.org/download/)
- [pgAdmin Installed](https://www.pgadmin.org/download/)

#### Steps:
1. Download the [Contoso database](https://github.com/lukebarousse/Int_SQL_Data_Analytics_Course/releases).
2. Open pgAdmin 4.
3. In Object Explorer, connect to your PostgreSQL server.
4. Right-click on "Databases" > "Create" > "Database...".  

<img src="./Resources/images/pgAdmin_CreateDatabase.gif" alt="Create Database" width="50%" height="auto">

5. Enter `contoso_100k`for "Database" and click "Save".
6. In Object Explorer, right-click on the `contoso_100k` database > "PSQL Tool".
7. In the PSQL Tools Window, enter `\i [path to contoso_100k.sql]` and press enter.
> ```
> \i '/Users/lukebarousse/Desktop/contoso_100k.sql'
> ```
8. If necessary, in the Query Tool, set default password for the `postgres` user to `password`.  
 **⚠ If you have sensitive information in your server DO NOT do this step; also not required if this is already your password ⚠️**
> ```
> ALTER USER postgres WITH PASSWORD 'password';
> ```
---
### Method 3️⃣: Run SQL Locally in Jupyter Notebook
> How Kelly & I built the course; not recommended for beginners.
#### Prerequisites:
- [PostgreSQL Installed](https://www.postgresql.org/download/)
- [Anaconda Installed](https://www.anaconda.com/products/distribution)
- Database Running Locally

#### Steps:
1. Create a new conda environment with `ipykernel`, `pandas`, and `matplotlib`:
> ```
> conda create -n sql_course python=3.11 ipykernel pandas matplotlib
> ```
2. Activate the environment:
> ```
> conda activate sql_course
> ```
3. Install the `jupysql` and `psycopg2` packages:
> ```
> conda install -c conda-forge jupysql psycopg2
> ```
4. Upgrade `jupysql`, necessary due to [this issue](https://github.com/ploomber/jupysql/issues/1038):
> ```
> pip install --upgrade jupysql
> ```
5. Activate the `sql_course` environment in the notebook.

## Found a Typo? Want to Contribute?
- If you find an error in this repo, please feel free to make a pull request by:
    - Forking the repo
    - Making any changes
    - Submitting a pull request
